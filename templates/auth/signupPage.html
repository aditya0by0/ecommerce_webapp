{% extends 'auth/authLayout.html'%}

{%block title%}
	<title>SignUp</title>
{%endblock title%}

{% block alert %}
	{% for message in get_flashed_messages() %}
    	<div class="alert alert-danger alert-dismissible fade show">	{{ message }} Please click 
    		<a href="/auth/login" class="alert-link">here</a> to login.
    	</div>
  	{% endfor %}
{% endblock%}

{% block heading%}
	<h1 class="fw-bold mb-0 fs-2">Sign up for free</h1>
{% endblock%}

{% block content %}
	<div class="form-floating mb-3">
        <input type="text" class="form-control rounded-3" name="name" id="floatingName" placeholder="Jose Muller">
        <label for="floatingName">FullName</label>
    </div>
    <div class="form-floating mb-3">
	    <input type="email" class="form-control rounded-3" name="email" id="floatingEmail" placeholder="name@example.com">
	    <label for="floatingEmail">Email address</label>
	</div>
{% endblock %}

{% block button %}
	<button class="w-100 mb-2 btn btn-lg rounded-3 btn-primary" type="submit">Sign up</button>
	
	<small class="text-body-secondary">By clicking Sign up, you agree to the terms of use.</small>
	<script>
	    // set the action URL dynamically here
	    var form = document.getElementById("extended_form");
	    var actionUrl = "/auth/signup"; 
	    form.action = actionUrl;
	    
	    // Autofill username based on email address
	    const emailEle = document.getElementById("floatingEmail")
	    console.log(emailEle)
	    emailEle.addEventListener('input', function(){
	    	console.log('test')
	    	let user = emailEle.value.split('@')[0]
	    	document.getElementById('floatingUsername').value = user
	    })
	</script>
{% endblock %} 

